<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>캡스톤 프로젝트</title>
    <link rel="stylesheet" href="../static/css/styles.css">
</head>
<body>
    <div class="header-container" id="header"></div>

    <main>
        <section class="main-image">
            <img src="https://jeiu.ac.kr/img/main/main_slide_02.png" alt="메인 이미지">
        </section>
        <section class="project-thumbnails">
            <p id="capTitle">캡스톤 프로젝트</p>
            <div class="thumbnails-container" id="thumbnails">
                <!-- 프로젝트 썸네일이 여기 추가됩니다 -->
            </div>
            <button class="more-button" onclick="loadMoreProjects()">더보기</button>
        </section>
    </main>

    <div class="footer-container" id="footer"></div>

    <script>
        // REST API를 이용해 데이터를 불러오는 함수
        async function loadProjects() { //페이지가 처음 로드될 때 restApi를 호출해서 프로젝트 썸넬 목록 불러옴
            try {
                const response = await fetch('https://your-api-endpoint.com/projects?sortBy=views');
                const projects = await response.json();

                const thumbnailsContainer = document.getElementById('thumbnails');
                thumbnailsContainer.innerHTML = ''; // 기존 썸네일 초기화

                projects.forEach(project => {
                    const thumbnail = document.createElement('div');
                    thumbnail.className = 'thumbnail';
                    thumbnail.innerHTML = `<img src="${project.imageUrl}" alt="${project.title}">`;
                    thumbnailsContainer.appendChild(thumbnail);
                });
            } catch (error) {
                console.error('Error loading projects:', error);
            }
        }

        // 더보기 버튼을 눌렀을 때 추가 프로젝트 로드
        async function loadMoreProjects() {
            try {
                const response = await fetch('https://your-api-endpoint.com/projects?more=true&sortBy=views');
                const moreProjects = await response.json();

                const thumbnailsContainer = document.getElementById('thumbnails');

                moreProjects.forEach(project => {
                    const thumbnail = document.createElement('div');
                    thumbnail.className = 'thumbnail';
                    thumbnail.innerHTML = `<img src="${project.imageUrl}" alt="${project.title}">`;
                    thumbnailsContainer.appendChild(thumbnail);
                });
            } catch (error) {
                console.error('Error loading more projects:', error);
            }
        }

        // HTML 페이지가 로드될 때 프로젝트를 불러옴
        document.addEventListener('DOMContentLoaded', loadProjects);

        // 모듈을 포함시키는 함수 (header와 footer 포함)
        async function includeHTML() {
            try {
                const headerResponse = await fetch('module/header.html');
                const headerHtml = await headerResponse.text();
                document.getElementById('header').innerHTML = headerHtml;

                const footerResponse = await fetch('module/footer.html');
                const footerHtml = await footerResponse.text();
                document.getElementById('footer').innerHTML = footerHtml;
            } catch (error) {
                console.error('Error loading modules:', error);
            }
        }

        // 페이지 로드 시 header와 footer를 포함시킴
        includeHTML();
    </script>
</body>
</html>